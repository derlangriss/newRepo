{"remainingRequest":"/Applications/fronendDevSpare/frontendDev2/project-x/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/fronendDevSpare/frontendDev2/project-x/src/member/UploadAvatar.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/fronendDevSpare/frontendDev2/project-x/src/member/UploadAvatar.vue","mtime":1638417282398},{"path":"/Applications/fronendDevSpare/frontendDev2/project-x/node_modules/cache-loader/dist/cjs.js","mtime":1638417375133},{"path":"/Applications/fronendDevSpare/frontendDev2/project-x/node_modules/babel-loader/lib/index.js","mtime":1638417375363},{"path":"/Applications/fronendDevSpare/frontendDev2/project-x/node_modules/cache-loader/dist/cjs.js","mtime":1638417375133},{"path":"/Applications/fronendDevSpare/frontendDev2/project-x/node_modules/vue-loader/lib/index.js","mtime":1638417375448}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBtb3VudGVkKCkgewogICAgCiAgICAgIGlmKCF0aGlzLiRyb290LnN0YXRlLmxvZ2luVG9rZW4pewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpCiAgICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGZpbGU6IG51bGwsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25TZWxlY3RGaWxlKGV2ZW50KSB7CiAgICAgIHRoaXMuZmlsZSA9IGV2ZW50LnRhcmdldC5maWxlc1swXTsKICAgIH0sCiAgICB1cGxvYWQoKSB7CiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiYXZhdGFyIiwgdGhpcy5maWxlKTsKCiAgICAgIGZldGNoKCJodHRwczovL2NhbXQtZm9vZGFwaS5wYWlyLWNvLmNvbS9tZS9hdmF0YXIiLCB7CiAgICAgICAgbWV0aG9kOiAiUFVUIiwKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICBBdXRob3JpemF0aW9uOgogICAgICAgICAgICBgQmVhcmVyICR7dGhpcy4kcm9vdC5zdGF0ZS5sb2dpblRva2VufWAsCiAgICAgICAgfSwKICAgICAgICBib2R5OiBmb3JtRGF0YSwKICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIuL3Byb2ZpbGUiKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["UploadAvatar.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UploadAvatar.vue","sourceRoot":"src/member","sourcesContent":["<template>\n  <div>\n    <h1>Upload Avatar</h1>\n    <form @submit.prevent=\"upload\">\n      <input type=\"file\" @change=\"onSelectFile\" />\n      <!-- <input type=\"file\" @change=\"onSelectFile\" multiple/> -->\n      <button type=\"submit\">Upload</button>\n    </form>\n  </div>\n</template>\n<script>\nexport default {\n  mounted() {\n    \n      if(!this.$root.state.loginToken){\n          this.$router.push('/login')\n      }\n  },\n  data: function () {\n    return {\n      file: null,\n    };\n  },\n  methods: {\n    onSelectFile(event) {\n      this.file = event.target.files[0];\n    },\n    upload() {\n      const formData = new FormData();\n      formData.append(\"avatar\", this.file);\n\n      fetch(\"https://camt-foodapi.pair-co.com/me/avatar\", {\n        method: \"PUT\",\n        headers: {\n          Authorization:\n            `Bearer ${this.$root.state.loginToken}`,\n        },\n        body: formData,\n      }).then((response) => {\n        if (response.status === 204) {\n          this.$router.push(\"./profile\");\n        }\n      });\n    },\n  },\n};\n</script>\n<style>\n</style>"]}]}